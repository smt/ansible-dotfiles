# file: group_vars/dotfiles.yml

---
dotfiles:
  # smt ------------------------------------------------------------------- {{{
  smt:
    # directories -------------------------------------------------- {{{
    directories:
      - "{{ smt.home }}/.config"
    # /directories ------------------------------------------------- }}}

    # git ---------------------------------------------------------- {{{
    git:
      repos:
        - name: oh-my-fish
          repo: "https://github.com/bpinto/oh-my-fish.git"
          dest: "{{ smt.home }}/.oh-my-fish"
        - name: rbenv
          repo: "https://github.com/sstephenson/rbenv.git"
          dest: "{{ smt.home }}/.rbenv"
        - name: ruby-build
          repo: "https://github.com/sstephenson/ruby-build.git"
          dest: "{{ smt.home }}/.rbenv/plugins/ruby-build"
        - name: pyenv
          repo: "https://github.com/yyuu/pyenv.git"
          dest: "{{ smt.home }}/.pyenv"
        - name: nvm
          repo: "https://github.com/creationix/nvm.git"
          dest: "{{ smt.home }}/.nvm"
        - name: nvm-wrapper
          repo: "https://github.com/passcod/nvm-fish-wrapper.git"
          dest: "{{ smt.home }}/.nvm-wrapper"
        - name: fzf
          repo: "https://github.com/junegunn/fzf.git"
          dest: "{{ smt.home }}/.fzf"
        - name: neobundle
          repo: "https://github.com/Shougo/neobundle.vim.git"
          dest: "{{ smt.home }}/.vim/bundle/neobundle.vim"
        - name: spacemacs
          repo: "https://github.com/syl20bnr/spacemacs.git"
          dest: "{{ smt.home }}/.emacs.d"
        - name: dotfiles
          repo: "https://github.com/smt/dotfiles.git"
          dest: "{{ smt.home }}/.dotfiles"
    # /git --------------------------------------------------------- }}}

    # fzf ---------------------------------------------------------- }}}
    fzf:
      commands:
        install:  "{{ smt.home }}/.fzf/install chdir={{ smt.home }} executable={{ smt.user.shell }}"
    # /fzf --------------------------------------------------------- }}}

    # vim_plug ----------------------------------------------------- {{{
    vim_plug:
      directories:
        root:  "{{ smt.home }}/.vim"
        autoload:  "{{ smt.home }}/.vim/autoload"
      commands:
        download:  "curl -fLo {{ smt.home }}/.vim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim chdir={{ smt.home }} creates={{ smt.home }}/.vim/autoload executable={{ smt.user.shell }}"
    # /vim_plug ---------------------------------------------------- {{{

    # nvm ---------------------------------------------------------- {{{
    nvm:
      directories:
        root:  "{{ smt.home }}/.nvm"
      executables:
        nvm:  "{{ smt.home}}/.nvm/nvm.sh"
      commands:
        checkout_nvm:  "git checkout (git describe --abbrev=0 --tags) chdir={{ smt.home }}/.nvm executable={{ smt.user.shell }}"
    # /nvm --------------------------------------------------------- }}}

    # rbenv -------------------------------------------------------- {{{
    rbenv:
      global:  "{{ smt.ruby.version }}"

      directories:
        root:  "{{ smt.home }}/.rbenv"
        bin:  "{{ smt.home }}/.rbenv/bin"
        versions:  "{{ smt.home }}/.rbenv/versions"
        global_root:  "{{ smt.home }}/.rbenv/versions/{{ smt.ruby.version }}"
        global_bin:  "{{ smt.home }}/.rbenv/versions/{{ smt.ruby.version }}"
        shims:  "{{ smt.home }}/.rbenv/shims"

      executables:
        bundle: "{{ smt.home }}/.rbenv/shims/bundle"
        gem: "{{ smt.home }}/.rbenv/shims/gem"
        pry: "{{ smt.home }}/.rbenv/shims/pry"
        rails: "{{ smt.home }}/.rbenv/shims/rails"
        rake: "{{ smt.home }}/.rbenv/shims/rake"
        rbenv: "{{ smt.home }}/.rbenv/bin/rbenv"

      commands:
        rbenv_install_ruby: "env RBENV_ROOT={{ smt.home }}/.rbenv {{ smt.home }}/.rbenv/bin/rbenv install {{ smt.ruby.version }} chdir={{ smt.home }} creates={{ smt.home }}/.rbenv/versions/{{ smt.ruby.version }} executable={{ smt.user.shell }}"
        rbenv_global_ruby: "env RBENV_ROOT={{ smt.home }}/.rbenv {{ smt.home }}/.rbenv/bin/rbenv global {{ smt.ruby.version }} chdir={{ smt.home }}"
        gem_install_bundler: "env RBENV_ROOT={{ smt.home }}/.rbenv {{ smt.home }}/.rbenv/shims/gem install bundler chdir={{ smt.home }}"
    # /rbenv ------------------------------------------------------- }}}

    # dotfiles ----------------------------------------------------- {{{
    dotfiles:
      directory: "{{ smt.home }}/.dotfiles"
      commands:
        install: "RBENV_ROOT={{ smt.home }}/.rbenv {{ smt.home }}/.rbenv/shims/rake chdir={{ smt.home }}/.dotfiles creates={{ smt.home }}/.fishrc.local"
    # /dotfiles ---------------------------------------------------- }}}
  # /smt ------------------------------------------------------------------ }}}
